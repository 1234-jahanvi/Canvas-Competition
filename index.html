<html>

<body onload="canvas.setup()">
    <canvas id="canvasArea" style="position: absolute; left: 0; top: 0; z-index: 0; width:100%;height:100%"></canvas>
    <script src="./canvas.js"></script>
</body>

</html>
<script>


    var c_x;
    var c_y;
    var r;
    var scale;
    var mid_x;
    var mid_y;
    // var v1;
    // var v2;
    // var res;

    // initialise the variable
    function setup() {
        mid_x = canvas.width/2;
        mid_y = canvas.height/2;
        c_x=0;
        c_y=0;
        scale=40;
        r=canvas.height*0.02;
    }

    function draw_arrow(x1,y1,x2,y2,colour,th,r1=r){
        canvas.setLineThickness(th);
        canvas.setColor(colour);
        canvas.drawLine(mid_x+(scale*x1),mid_y-(scale*y1),mid_x+(scale*x2),mid_y-(scale*y2));
        canvas.drawCircle(mid_x+(scale*x2),mid_y-(scale*y2),r1);
    }
    function print_text(x,y,message,colour="rgb(0,0,0)",size=15){
        canvas.setColor(colour);
        canvas.drawText(x,y,message,size);
    }

    class vector{
        constructor(x,y){
            this.x=x;
            this.y=y;
            this.len=Math.sqrt((this.x-c_x)*(this.x-c_x)+(this.y-c_y)*(this.y-c_y));
            this.flag=0;
        }
        draw_vector(colour1,colour2,thickness,radius=r){
            draw_arrow(c_x,c_y,this.x,this.y,colour1,thickness,radius);
            print_text(mid_x+scale*((this.x+c_x)/2),mid_y-scale*((this.y+c_y)/2),this.len.toFixed(2),colour2);
        }
        update_len(){
            this.len=Math.sqrt((this.x-c_x)*(this.x-c_x)+(this.y-c_y)*(this.y-c_y));
        }
        update_vector(){
            this.x=(canvas.mouseX-mid_x)/scale;
            this.y=(mid_y-canvas.mouseY)/scale;
            this.update_len();
        }
        check_update(){
            if(canvas.mouseX<mid_x+scale*this.x+r && canvas.mouseX>mid_x+scale*this.x-r && canvas.mouseY>mid_y-scale*this.y-r && canvas.mouseY<mid_y-scale*this.y+r){
                if(canvas.mouseDown==true){
                    this.flag=1;
                }
            }
            if(canvas.mouseDown==false){
                this.flag=0;
            }
        }
        calculate_resultant(v1,v2){
            //print_text(canvas.width*0.5,canvas.height*0.5," VECTOR ","rgb(100,50,15)",50);
            this.x=v1.x+v2.x-c_x;
            this.y=v1.y+v2.y-c_y;
            this.update_len();
        }
    }

    let v1=new vector(4,0);
    let v2=new vector(0,3);
    let res=new vector(4,3);
    // Function while will be called repeatedly 

    function main() {
        canvas.clear();
        canvas.setColor("rgb(0,0,0)");
        canvas.setLineThickness(1);
        canvas.drawLine(mid_x,0,mid_x,canvas.height);
        canvas.drawLine(0,mid_y,canvas.width,mid_y);
        print_text(canvas.width*0.335,canvas.height*0.1,"VECTOR ADDITION","rgb(100,50,15)",50);

        v1.update_len();
        v2.update_len();
        res.calculate_resultant(v1,v2);

        v1.draw_vector("rgb(255,0,0)","rgb(150,0,0)",3);
        v2.draw_vector("rgb(0,255,0)","rgb(0,150,0)",3);
        res.draw_vector("rgb(0,0,255)","rgb(0,0,150)",3,r*0.5);

        draw_arrow(v1.x,v1.y,res.x,res.y,"rgb(0,0,0)",0.5,0);
        draw_arrow(v2.x,v2.y,res.x,res.y,"rgb(0,0,0)",0.5,0);

        v1.check_update();
        if(canvas.mouseDown==true && v1.flag==1){
            v1.update_vector();
        }
        v2.check_update();
        if(canvas.mouseDown==true && v2.flag==1){
            v2.update_vector();
        }
        
    }
    // Override functions here; 
    canvas.mainFunction = main;
    canvas.setupFunction = setup;
    var timeStep =50;
    canvas.startMain(timeStep);


    
</script>



